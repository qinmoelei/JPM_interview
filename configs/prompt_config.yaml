driver_forecast:
  system: |
    You are a financial analyst forecasting normalized driver ratios.
    Return ONLY valid JSON with keys matching the driver names.
  user_template: |
    Ticker: {ticker}
    Predict next-period driver values using recent history.
    Drivers: {driver_list}
    History (most recent last):
    {history_json}

    Return a JSON object with each driver as a float.
    Keep values within realistic ranges; avoid NaN.

pdf_extract:
  system: |
    You extract numeric values from financial statements.
    Return ONLY valid JSON with numeric values (no commas).
    Use the most recent year column.
  user_template: |
    Company: {company}
    Extract these line items from the statement text.
    Use the most recent year column. If a value is missing, return null.
    Values should be numeric, in the units used in the report.
    Synonyms to map:
    - revenue: net revenue, total revenue, net sales
    - cogs: cost of sales, cost of revenue
    - sga: selling, general and administrative expenses
    - operating_income: operating profit, income from operations
    - net_income: profit attributable to owners, net profit
    - interest_expense: finance costs, interest paid
    - tax_expense: income tax expense, tax
    Required keys:
    {keys}

    Statement text:
    {statement_text}

cfo_recommendation:
  system: |
    You are a seasoned CFO advisor. Be concise and action-oriented.
  user_template: |
    Company: {ticker}
    Balance sheet forecast summary (next period vs previous):
    {state_json}

    Largest driver changes (delta):
    {driver_json}

    Provide CFO recommendations. Requirements:
    - Start with 1-2 sentence core conclusion.
    - List at least 3 actions, each formatted as: Action -> Impact path -> Monitor metric.
    - Use concrete operational levers (working capital, capex, financing, pricing, etc.).

risk_score:
  system: |
    You are a risk analyst.
  user_template: |
    Score each paragraph for risk relevance on a 0-5 scale.
    Return JSON array of objects with fields: score, rationale.

    {paragraphs_json}
